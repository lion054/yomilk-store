<!-- Product Shelf Section -->
<section class="product-shelf py-6 bg-white">
  <div class="container mx-auto px-4">
    <!-- Section Header with "View All" link -->
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-fresh-700 uppercase tracking-wide">{{title}}</h2>
      <a routerLink="/store"
        [queryParams]="{category:itemGroupCode}"
        class="text-coral-500 hover:text-coral-600 text-sm font-semibold flex items-center gap-1 transition-colors">
        View All
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m9 18 6-6-6-6"/>
        </svg>
      </a>
    </div>

    <!-- Products Shelf -->
    @if (products.length > 0) {
      <div class="relative">
        <!-- Desktop Navigation Arrow - Left -->
        <button
          class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-2 z-20 w-10 h-10 bg-white rounded-full shadow-lg border border-gray-100 hidden md:flex items-center justify-center hover:bg-gray-50 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:ring-opacity-50 transition-all"
          (click)="scrollLeft()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-fresh-700">
            <path d="m15 18-6-6 6-6"/>
          </svg>
        </button>
        <!-- Desktop Navigation Arrow - Right -->
        <button
          class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-2 z-20 w-10 h-10 bg-white rounded-full shadow-lg border border-gray-100 hidden md:flex items-center justify-center hover:bg-gray-50 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-coral-500 focus:ring-opacity-50 transition-all"
          (click)="scrollRight()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-fresh-700">
            <path d="m9 18 6-6-6-6"/>
          </svg>
        </button>
        <!-- Scrollable Product Container -->
        <div class="product-shelf-container overflow-x-auto hide-scrollbar scroll-smooth" #productContainer>
          <div class="product-shelf-inner flex gap-4 pb-4 pt-2">
            @for (product of products; track product.itemCode) {
              <div class="product-shelf-item flex-shrink-0">
                <app-product-card [product]="product"></app-product-card>
              </div>
            }
          </div>
        </div>
      </div>
    }

    <!-- Loading State -->
    @if (products.length == 0) {
      <div class="relative">
        <div class="product-shelf-inner flex gap-4 pb-4 pt-2 overflow-x-auto hide-scrollbar">
          @for (item of arr; track $index) {
            <div class="flex-shrink-0 w-48 md:w-52">
              <div class="bg-white rounded-xl overflow-hidden shadow-sm border border-gray-100">
                <!-- Image Skeleton -->
                <div class="aspect-square w-full bg-gray-200 animate-pulse relative overflow-hidden">
                  <div class="absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-pulse"></div>
                </div>
                <!-- Content Skeleton -->
                <div class="p-3 space-y-3">
                  <div class="h-5 w-20 bg-gray-200 rounded animate-pulse"></div>
                  <div class="h-4 w-full bg-gray-200 rounded animate-pulse"></div>
                  <div class="h-4 w-3/4 bg-gray-200 rounded animate-pulse"></div>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    }
  </div>
</section>
