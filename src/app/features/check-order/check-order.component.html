<section class="flex justify-center items-center">

  @if (loading) {
    <!--    <div class="w-full flex items-center justify-center flex-col h-[30rem]">-->
    <!--      <h1 class="text-xl pb-6">Checking your transaction-->
  <!--      </h1>-->
  <!--      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-circle animate-spin"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>-->
<!--    </div>-->
<div
  role="status"
  class="min-h-[30rem] w-full flex flex-col items-center justify-center gap-6 bg-gray-50 transition-opacity duration-300"
  >
  <div class="flex flex-col items-center justify-center gap-4">
    <!-- Spinner with color and optimized animation -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="64"
      height="64"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="animate-spin text-blue-600"
      >
      <path d="M21 12a9 9 0 1 1-6.219-8.56" />
    </svg>
    <!-- Text with better hierarchy and animation -->
    <div class="flex flex-col items-center gap-2">
      <h1 class="text-3xl font-semibold text-gray-900 animate-pulse">
        Processing Transaction
      </h1>
      <p class="text-gray-600 font-medium animate-bounce">
        This may take a few moments...
      </p>
    </div>
  </div>
  <!-- Accessibility text -->
  <span class="sr-only">Loading transaction verification</span>
</div>
}

<!--  <ng-container *ngIf="!loading && !success">-->
<!--      <div class="w-full flex items-center justify-center flex-col h-[30rem]">-->
<!--      <h1 class="text-3xl pb-6">{{ error }}-->
<!--      </h1>-->
<!--      </div>-->
<!--    -->
<!--  </ng-container>-->

@if (!loading && !success) {
  <div class="w-full  flex items-center justify-center bg-gray-50 p-4 animate-fade-in">
    <div class="max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center transition-all duration-300 hover:shadow-xl">
      <div class="flex flex-col items-center space-y-4">
        <!-- Error Icon -->
        <svg
          class="w-20 h-20 text-red-500 mb-4 animate-bounce"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
            />
        </svg>
        <!-- Error Message -->
        <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">
          Oops! Something went wrong
        </h1>
        <p class="text-red-600 font-medium text-lg mb-4">
          {{ error }}
        </p>
        <p class="text-gray-600 mb-6">
          Please check your connection and try again. If the problem persists, contact support.
        </p>
        <!-- Action Buttons -->
        <div class="flex space-x-4">
          <button
            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center"
            >
            <svg
              class="w-5 h-5 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                />
            </svg>
            Try Again
          </button>
          <button
            class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"
            >
            Contact Support
          </button>
        </div>
        <!-- Error Code (Optional) -->
        @if (error) {
          <div class="mt-6 text-sm text-gray-500">
            Error code: {{ error }}
          </div>
        }
      </div>
    </div>
  </div>
}


@if (!loading && success) {
  <!--    <div class="w-full flex items-center justify-center flex-col">-->
  <!--      <h1 class="text-xl pb-2">Order Created Successfully-->
<!--      </h1>-->
<!--      <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-check"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>          </div>-->
<!--    <div class="flex justify-center items-center mt-10 ">-->
<!--      <button class="bg-accent-500 p-2.5 rounded w-1/3 text-white" type="button" routerLink="/store" >Shop</button>-->
<!--      &lt;!&ndash;            <button class="bg-accent-500 p-2.5 rounded  my-5 hover:bg-accent-600 text-white" type="submit" >Complete Order</button>&ndash;&gt;-->
<!--    </div>-->
<!-- order-confirmation.component.html -->
@if (!accountFunding) {
  <div class="max-w-4xl mx-auto my-8 p-8 font-sans text-gray-700">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">Thank you for your purchase!</h1>
    <div class="bg-gray-50 p-4 rounded-lg mb-8">
      <p class="text-gray-600">
        Your order will be processed within 24 hours during working days. We will notify you by email once your order has been shipped.
      </p>
    </div>
    <div class="border border-gray-200 rounded-lg p-6 mb-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Billing Address</h2>
      <table class="w-full mb-4">
        <tr class="border-b border-gray-200">
          <td class="py-2">Name</td>
          <td class="py-2 font-medium">{{ activeOrder.invoice.billToAddress.firstName }} {{ activeOrder.invoice.billToAddress.lastName }}</td>
        </tr>
        <tr class="border-b border-gray-200">
          <td class="py-2">Address</td>
          <td class="py-2 font-medium">{{ activeOrder.invoice.billToAddress.addressLine1 }} {{ activeOrder.invoice.billToAddress.city }}</td>
        </tr>
        <tr class="border-b border-gray-200">
          <td class="py-2">Phone</td>
          <td class="py-2 font-medium">{{ activeOrder.invoice.billToAddress.phoneNumber}}</td>
        </tr>
        <tr>
          <td class="py-2">Email</td>
          <td class="py-2 font-medium">{{  activeOrder.invoice.billToAddress.email }}</td>
        </tr>
      </table>
      <!--        <div class="mt-6">-->
      <!--          <hr class="border-t border-gray-200 my-4">-->
      <!--          <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Track Your Order</a>-->
    <!--        </div>-->
  </div>
  <div class="border border-gray-200 rounded-lg p-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Order Summary</h2>
    <table class="w-full table-auto border-collapse mb-6">
      <thead>
        <tr class="border-b border-gray-200">
          <th class="text-left py-3 px-4">Date</th>
          <th class="text-left py-3 px-4">Order Number</th>
          <th class="text-left py-3 px-4">Payment Method</th>
          <th class="text-left py-3 px-4">PayNow Ref</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="py-3 px-4">{{  Date() | date }}</td>
          <td class="py-3 px-4">{{ activeOrder.invoice.paymentReference }}</td>
          <td class="py-3 px-4">{{ activeOrder.invoice.paymentMethod }}</td>
          <td class="py-3 px-4">{{ paymentRef }}</td>
        </tr>
      </tbody>
    </table>
    <div class="space-y-4 mb-6">
      @for (item of activeOrder.invoice.documentLines; track item) {
        <div class="flex justify-between items-center border-b border-gray-200 pb-4">
          <div>
            <h3 class="font-medium">{{ item.itemDescription }}</h3>
            <div class="text-sm text-gray-500">
              <span class="mr-4">{{ item.itemCode }}</span>
              <span>{{ item.quantity }}</span>
            </div>
          </div>
          <div class="font-medium">{{ item.priceAfterVAT | currency }}</div>
        </div>
      }
    </div>
    <div class="border-t border-gray-200 pt-4 space-y-3">
      <div class="flex justify-between">
        <span>Sub Total</span>
        <span class="font-medium">{{ activeOrder.invoice.docTotal | currency }}</span>
      </div>
      <!--          <div class="flex justify-between">-->
      <!--            <span>Shipping</span>-->
      <!--            <span class="font-medium">{{ orderInfo.shipping | currency }}</span>-->
    <!--          </div>-->
    <!--          <div class="flex justify-between">-->
    <!--            <span>Tax</span>-->
    <!--            <span class="font-medium">{{ orderInfo.tax | currency }}</span>-->
  <!--          </div>-->
  <div class="flex justify-between text-lg font-bold pt-4">
    <span>Order Total</span>
    <span>{{ activeOrder.invoice.docTotal | currency }}</span>
  </div>
</div>
</div>
</div>
}
@if (accountFunding) {
  <div class="max-w-4xl mx-auto my-8 p-8 font-sans text-gray-700">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">Account funded successfully</h1>
    <div class="bg-gray-50 p-4 rounded-lg mb-8">
      <p class="text-gray-600">
        Your account has been successfully funded please check your balance in the profile to confirm
      </p>
    </div>
    <div class="border border-gray-200 rounded-lg p-6 mb-8">
      <!--        <h2 class="text-xl font-semibold text-gray-800 mb-4">Billing Address</h2>-->
      <!--        <table class="w-full mb-4">-->
      <!--          <tr class="border-b border-gray-200">-->
      <!--            <td class="py-2">Name</td>-->
      <!--            <td class="py-2 font-medium">{{ activeOrder.invoice.billToAddress.firstName }} {{ activeOrder.invoice.billToAddress.lastName }}</td>-->
    <!--          </tr>-->
    <!--          <tr class="border-b border-gray-200">-->
    <!--            <td class="py-2">Address</td>-->
    <!--            <td class="py-2 font-medium">{{ activeOrder.invoice.billToAddress.addressLine1 }} {{ activeOrder.invoice.billToAddress.city }}</td>-->
  <!--          </tr>-->
  <!--          <tr class="border-b border-gray-200">-->
  <!--            <td class="py-2">Phone</td>-->
  <!--            <td class="py-2 font-medium">{{ activeOrder.invoice.billToAddress.phoneNumber}}</td>-->
<!--          </tr>-->
<!--          <tr>-->
<!--            <td class="py-2">Email</td>-->
<!--            <td class="py-2 font-medium">{{  activeOrder.invoice.billToAddress.email }}</td>-->
<!--          </tr>-->
<!--        </table>-->
<!--        <div class="mt-6">-->
<!--          <hr class="border-t border-gray-200 my-4">-->
<!--          <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Track Your Order</a>-->
<!--        </div>-->
</div>
<div class="border border-gray-200 rounded-lg p-6">
  <h2 class="text-xl font-semibold text-gray-800 mb-4">Order Summary</h2>
  <table class="w-full table-auto border-collapse mb-6">
    <thead>
      <tr class="border-b border-gray-200">
        <th class="text-left py-3 px-4">Date</th>
        <th class="text-left py-3 px-4">Order Number</th>
        <th class="text-left py-3 px-4">Payment Method</th>
        <th class="text-left py-3 px-4">PayNow Ref</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="py-3 px-4">{{  Date() | date }}</td>
        <td class="py-3 px-4">{{ activeOrder.payment.paymentReference }}</td>
        <td class="py-3 px-4">{{ 'PayNow' }}</td>
        <td class="py-3 px-4">{{ paymentRef }}</td>
      </tr>
    </tbody>
  </table>
  <div class="border-t border-gray-200 pt-4 space-y-3">
    <div class="flex justify-between">
      <span>Sub Total</span>
      <span class="font-medium">{{ activeOrder.payment.transferSum | currency }}</span>
    </div>
    <div class="flex justify-between text-lg font-bold pt-4">
      <span>Order Total</span>
      <span>{{ activeOrder.payment.transferSum | currency }}</span>
    </div>
  </div>
</div>
</div>
}
}
</section>


